\documentclass[10pt,fleqn]{article} % Default font size and left-justified equations
\usepackage[%
    pdftitle={Modélisation systèmes multiphysiques : Modélisation linéaire et non linéaire},
    pdfauthor={Xavier Pessoles}]{hyperref}
\usepackage{pdfpages}
\input{style/new_style}
\input{style/macros_SII}
\usepackage{multicol}
\usepackage{standalone}
\standaloneconfig{mode=buildnew}
\usepackage{siunitx}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{listings}
\lstset{language=Python,
  inputencoding=utf8,
  breaklines=true,
  basicstyle=\ttfamily\small,
  keywordstyle=\bfseries\color{green!40!black},
  commentstyle=\itshape\color{purple!40!black},
  identifierstyle=\color{blue},
  stringstyle=\color{orange},
  upquote = true,
  columns=fullflexible,
  backgroundcolor=\color{gray!10},frame=leftline,rulecolor=\color{gray}}  
  
\definecolor{mygreen}{rgb}{0,0.6,0}


\lstset{
     literate=%
         {é}{{\'e}}1    
         {è}{{\è}}1    
         {ê}{{\^e}}1    
         {à}{{\à}}1    
         {ô}{{\^o}}1    
         {ù}{{\`u}}1    
}

\graphicspath{{images/}{png/}}

\fichetrue

%\fichefalse

\proftrue
\proffalse

\tdtrue
%\tdfalse

\courstrue
\coursfalse

\def\discipline{Sciences \\Industrielles de \\ l'Ingénieur}
\def\xxtete{Sciences Industrielles de l'Ingénieur}

\def\classe{PSI$\star$}
\def\xxnumpartie{{DS 4}}%\textsf{\textsf{Cy. 4, 6 \& 7}}}
\def\xxpartie{Devoir Surveillé 4}


\def\xxnumchapitre{3 janvier 2022 \vspace{.2cm} $\;$ }
\def\xxchapitre{\hspace{.12cm} }%Performances des systèmes asservis}


\def\xxtitreexo{\noindent Stabilisateur d'image mécanique}
\def\xxsourceexo{\hspace{.2cm} DS BLANC}%Banque PT -- SIA 2019}


\def\xxposongletx{2}
\def\xxposonglettext{1.45}
\def\xxposonglety{20}
%\def\xxonglet{Part. 1 -- Ch. 3}
\def\xxonglet{\textsf{DS 4}}%\textsf{\textsf{Cy. 4, 6 \& 7}}}
\def\xxactivite{\textsf{DS 4}}
\def\xxauteur{\textsl{Xavier Pessoles}}

\def\xxcompetences{%
\textsl{%
%\textbf{Savoirs et compétences :}\\
%Les sources sont associées par un \emph{hacheur série}. La détermination des grandeurs électriques associées à ce montage permet de conclure vis à vis du cahier des charges.
%\noindent \textbf{Résoudre :} à partir des modèles retenus :
%\begin{itemize}[label=\ding{112},font=\color{ocre}] 
%\item choisir une méthode de résolution analytique, graphique, numérique;
%\item mettre en \oe{}uvre une méthode de résolution.
%\end{itemize}
%\begin{itemize}[label=\ding{112},font=\color{ocre}] 
%\item \textit{Rés -- C1.1 :} Loi entrée sortie géométrique et cinématique -- Fermeture géométrique.
%\end{itemize}
%
%\noindent \textit{Mod2 -- C4.1 :} Représentation par schéma-blocss.
}}

\def\xxfigures{
%\includegraphics[width=.55\linewidth]{fig_00}
}%figues de la page de garde


\def\xxpied{%
%Cycle 01 -- Modéliser le comportement des systèmes multiphysiques\\
\xxactivite%
}

\setcounter{secnumdepth}{5}
%---------------------------------------------------------------------------

\usepackage{pgfplots}
\begin{document}
%\defimages{images}
%\chapterimage{png/Fond_Cin}
\input{style/new_pagegarde}
\vspace{5cm}
\pagestyle{fancy}
\thispagestyle{plain}

\def\columnseprulecolor{\color{white}}
\setlength{\columnseprule}{0.4pt} 

%\defimages2{images}

%\begin{multicols}{2}

La stabilisation d’images - photo ou vidéo – est un domaine en pleine évolution. On peut distinguer deux types principaux : les stabilisateurs optiques qui améliorent la qualité par le traitement informatique des images et les stabilisateurs mécaniques qui s’opposent aux mouvements indésirables pendant la prise de vue. Parmi les stabilisateurs mécaniques étudiés ici nous distinguons les stabilisateurs passifs représentés sur les figures 1 à 3 ci-dessous, des stabilisateurs actifs représentés sur les figures 4 à 7. 

\begin{center}
\includegraphics[width=.8\linewidth]{images/FIG_01}
\end{center}

\begin{center}
\includegraphics[width=.8\linewidth]{images/FIG_02}
\end{center}

\begin{center}
\includegraphics[width=.8\linewidth]{images/FIG_03}
\end{center}

Les appareils photos modernes fonctionnent en rafales : 8 à 10 images par seconde et en mode vidéo. Le besoin de stabilisation de l’image dans de telles conditions est impératif.

\begin{itemize}
\item Figure 1 : le stabilisateur mécanique est muni d’une poignée de prise, il nécessite des réglages de contrepoids ;
\item Figure 2 : Un autre modèle dans une autre position ;
\end{itemize}
Le besoin de prises de vue originales et au plus près de l’action à filmer a conduit les concepteurs de matériel cinématographique à déplacer leur caméra au moyen de supports mobiles très variés :
\begin{itemize}
\item Figure 3 : stabilisateur de caméra vidéo avec support de portage sur le torse du cameraman ;
\item Figure 4 : le système de prise de vue est tenu par des câbles de très grande longueur au-dessus d’un stade ;
\item Figure 5 : le système de prise de vue est fixé à l’avant d’un hélicoptère ;
\item Figure 6 : le système de prise de vue est fixé à un bras télescopique mobile type « Louma » ;
\item Figures 7 : le système de prise de vue est fixé à un ballon gonflé à l’hélium en position fixe au-dessus d’un stade pendant un match de football par exemple. 
\end{itemize}
Le but de ce sujet est de s’intéresser au support de la caméra (appareil photo) assurant la liaison entre le système de mise en mouvement appelé porteur (poignée -- câble -- hélicoptère -- bras) et la caméra elle-même. 
Dans la première partie le sujet aborde le cas des stabilisateurs passifs puis par comparaison montre l’intérêt des stabilisateurs actifs.
Pour les parties suivantes, la modélisation décrite dans le DOCUMENT D1 Présentation de la nacelle de la caméra est utilisée pour l’ensemble du questionnement. Ce système de stabilisation est nommé CAM-GYR, c’est un système actif.


\section{Analyse mécanique des stabilisateurs passif et actif}

\begin{obj}
Valider l’exigence 2 « support passif »  DOCUMENT D5-b.
\end{obj}

\subsection{Stabilisateur de type « passif », principe et réglage}
 

Afin de mieux appréhender les caractéristiques et les performances attendues du système actif de stabilisation étudié dans la suite du sujet, on présente dans un premier temps, une version passive (c’est-à-dire sans aucune motorisation). Comme le précise la \autoref{FIG_08}, ce système (commercialisé sous le nom de « stabilisateur ») se compose principalement de trois objets :
\begin{itemize}
\item une poignée orientable (1) manipulée directement par le photographe, liée au support (2) en O;
\item un support rigide (2) (supposé sans masse) sur lequel vient se fixer une caméra assimilée en première approximation à une masse ponctuelle mc placée en $G_c$ ;
\item un contrepoids lié à (2) et assimilé à une masse ponctuelle mcp placée en $G_{cp}$.
\end{itemize}

\begin{figure}[H]
\centering
\includegraphics[width=.5\linewidth]{FiG_08}
\caption{Stabilisateur passif, vue générale \label{FIG_08}}
\end{figure}

L’utilisateur (le porteur) tient fermement la poignée (1) dans une position angulaire quelconque, ce qui permet d’affirmer que le (porteur + (1)) ne forme qu’une seule classe d’équivalence. 
Afin de produire des images toujours fluides, sans à-coups, ce stabilisateur à main doit maintenir constamment la caméra dans une position (ou « attitude ») verticale (parallèle au champ de gravité), que le porteur soit immobile (plan fixe) ou en mouvement (travelling).

Pour l’ensemble du sujet, on adopte les notations suivantes :
%\begin{itemize}
%\item torseur cinématique caractérisant le mouvement du solide (i) par rapport au solide (j) réduit au point A quelconque :  
%ou dans la base   : 
%•	torseur des actions mécaniques exercées par le solide (i) sur le solide (j) réduit au point A quelconque :  

L’ensemble des études et des conclusions apportées dans les questions suivantes permet de remplir efficacement le tableau de synthèse de la question \ref{q7}.

%Question 1 :
\subparagraph{}\textit{En cohérence avec l’attitude attendue de la caméra, donner les éléments de réduction en $O$ du torseur cinématique de l'ensemble \{support + caméra\} par rapport au sol noté (0) en $O$ soit  $\torseurcin{V}{2}{0}$.}

%; utiliser les notations définies ci-dessus pour les torseurs ;
On suppose quelconque le mouvement du porteur (équivalent à (1)) dans (0), caractérisé par le torseur cinématique suivant :
$\torseurcin{V}{1}{0}=
\torseurl{\vecto{1}{0}=\omega_x(1/0)\vect{X_0}+\omega_y(1/0)\vect{Y_0}+\omega_z(1/0)\vect{Z_0}}{\vectv{O}{1}{0}=v_x(1/0)\vect{X_0}+v_y(1/0)\vect{Y_0}+v_z(1/0)\vect{Z_0}}{O}$.

\subparagraph{\label{q1}}\textit{En utilisant la composition des vitesses, déterminer les éléments de réduction du torseur cinématique  $\torseurcin{V}{2}{1}$ en $O$. En discutant de la valeur du terme $\omega_z(2/0)-\omega_z(1/0)$ , donner le(s) nom(s) de(s) liaison(s) mécanique(s) (1)-(2) compatible(s) avec le maintien de l’attitude de la caméra.}

On utilise les éléments définis sur la figure 8. On se place dans un premier temps dans une phase qualifiée de « statique », c'est-à-dire que la poignée (1) est parfaitement immobile par rapport au sol (0). 
L’utilisateur solidarise la caméra sur le support (2) démuni de contrepoids. On appelle $G_c$ le centre de gravité de l'ensemble   et O le centre de la liaison (parfaite au sens énergétique) poignée (1)--support (2).

%Question 2a :	
\subparagraph{\label{q2a}}\textit{Isoler l'ensemble E=\{support, caméra\}  puis  lister et dénombrer les actions mécaniques extérieures à (E).}

%Question 2b :	
\subparagraph{\label{q2b}}\textit{Enoncer alors la condition géométrique portant sur la position de $G_c$, assurant l’équilibre de (E) dans (0) ?}

%Question 2c :	
\subparagraph{\label{q2c}}\textit{L’équilibre obtenu peut-il être qualifié de stable ou instable ? Qu’en déduit l’utilisateur par rapport à l’exigence 2.1  « pré réglage » du DOCUMENT D5-b ?}


Dans un souci de simplification, on adopte le paramétrage décrit par la figure de la question \ref{q3} du document réponse. A l'instant initial, l'ensemble (E) est en position verticale ($\varphi = 0$).
Des rainures de réglage placées selon $\vect{X_2}$ et $\vect{Y_2}$ permettent de solidariser la caméra sur le support (2) tout en respectant la condition établie précédemment (Question \ref{q2b}). 

Ce réglage effectué, on note $\vect{OG_c}=L_c\vect{Z_2}$. On adjoint à présent au support (2) un contrepoids 
(assimilé à une masse ponctuelle $m_{cp}$ en $G_{cp}$ tel que , $\vect{OG_{cp}}=-L_{cp}\vect{Z_2}$ réglable) 
censé améliorer la qualité de l’équilibre de l'ensemble complet noté E'=\{support, caméra, contrepoids\} de centre 
de gravité $G$.


%Question 3 :	
\subparagraph{\label{q3}}\textit{En utilisant la figure du document réponse, établir une condition liant $m_c$, $m_{cp}$, $L_c$ et $L_{cp}$  garantissant une attitude satisfaisante de la caméra tout en assurant un équilibre stable.}
\textbf{On commencera par exprimer la position du centre de gravité $G$ de l'ensemble E.}

On se place à présent dans une phase dite « dynamique ». Le porteur (1) est en mouvement par rapport au sol. On suppose qu'à l'instant initial, l'ensemble (E') est en équilibre stable en position verticale.

On utilise toujours la figure de la question \ref{q3} (document réponse) pour le paramétrage et on se limite à une translation du poignet (1) selon $\vect{X_0}$ dans (0). 

Ainsi $\torseurcin{V}{1}{0}=\torseurl{\vect{0}}{\vectv{V}{1}{0}=v(t)\vect{X_0}}{\forall P}$.
On note l’accélération  $a(t)=\dfrac{\dd v(t)}{\dd t}$.


%Question 4 :	 
\subparagraph{\label{q4}}  \textbf{QUESTION LONGUE -- PLEIN DE POINTS ICI !!} \textit{Par une étude dynamique que vous mettrez en œuvre, montrer que l'équation de mouvement de (E') dans (0) galiléen s'exprime comme : $A_1 \dfrac{\dd^2\varphi(t)}{\dd t^2}+Q_2 = Q_3 a(t)$.
 Pour cela, vous commencerez par exprimer le bilan des actions mécaniques extérieures s’exerçant sur (E’). Puis, le théorème de la dynamique utilisé sera clairement énoncé. Enfin, les expressions des $Q_i$ en fonction de  $m_c$, $m_{cp}$, $L_c$, $L_{cp}$, $g$, $\sin\varphi(t)$ et $\cos\varphi(t)$ seront établies.}
\textbf{Comme suggéré : 
\begin{itemize}
\item réaliser le bilan des actions mécaniques qui s'appliquent sur E' et déplacer les torseurs au point $O$;
\item déterminer $\vectmd{G}{2+c}{0}\cdot\vect{y_0}$;
\item déterminer $\vectmd{O}{2+c}{0}\cdot\vect{y_0}$;
\item en déduire $\vectmd{O}{cp}{0}\cdot\vect{y_0}$ puis $\vectmd{O}{2+c+cp}{0}\cdot\vect{y_0}$;
\item appliquer le TMD en $O$ en projection sur $\vect{y_0}$;
\item en déduire les expressions des $Q_i$.  
\end{itemize}
On montre alors que $\left( L_c m_c -L_{cp}m_{cp}\right)g\sin\varphi = \left( L_c m_c -L_{cp}m_{cp}\right) \ddot{x}\cos\varphi + \left( L^2_c m_c -L^2_{cp}m_{cp}\right)\ddot{\varphi}$.}

%Question 5 :	 
\subparagraph{\label{q5}}\textit{À partir de la position de repos, le porteur se met en mouvement dans (0) ; on suppose que  $a\neq 0$ et on considère que la condition établie à la question \ref{q3} est satisfaite. À l’aide de l'équation établie précédemment, indiquer (en le justifiant) si l’attitude $\varphi(t)$ de (E') se trouve modifiée dans le cas où :}
\textit{\begin{enumerate}
\item le centre de gravité de (E') noté $G$, se trouve confondu avec $O$ ;
\item le centre de gravité de (E') noté $G$, ne se trouve pas confondu avec $O$.
\end{enumerate}}

\vspace{.5cm}
Afin de quantifier la modification d’attitude de (E’), l'équation de mouvement est linéarisée autour de la position d'équilibre (verticale) en supposant que les valeurs de l'angle $\varphi$  restent faibles. On transpose cette équation différentielle dans le domaine de Laplace et on note 
$\mathcal{L}\left( \varphi(t)\right)=\Phi(p)$ et $\mathcal{L}\left( \alpha(t)\right)=A(p)$.
On suppose vérifiée la condition établie à la question \ref{q3}.
Afin de conserver la fluidité des images lors de travelling, les fluctuations indésirables des mouvements du porteur ne doivent pas être intégralement transmisses à (E’). 
On suppose que : $a(t)=a_0 \sin\left(\omega_a t\right)$ avec $a_0=\SI{0,5}{m.s^{-2}}$; on prendra $g=\SI{10}{m.s^{-2}}$.


%Question 6a :	
\subparagraph{\label{q6a}}\textit{Etablir, sous forme canonique, la fonction de transfert $H(p)=\dfrac{\Phi(p)}{A(p)}$. Donner l'expression de la pulsation propre $\omega_0$ en fonction de  $m_c$, $m_{cp}$, $L_c$, $L_{cp}$ et $g$.}

%Question 6b :	
\subparagraph{\label{q6b}}\textit{Tracer l'allure du diagramme asymptotique de gain $G_{\text{dB}}=f(\omega)$ de la fonction de transfert $H(j\omega)$. Placer les caractéristiques remarquables.}

%Question 6c :	
\subparagraph{\label{q6c}}\textit{Pour un fonctionnement filtrant satisfaisant, on impose que $\omega_0=0,1\omega_a$. Le stabilisateur est réglé en conséquence par l’intermédiaire du couple $\left(m_{cp},L_{cp}\right)$. En utilisant le comportement asymptotique en gain de $G_{\text{dB}}$, estimer numériquement l'amplitude $\Delta \varphi$ (en degrés) des oscillations de (E') selon l'axe $\left(O,\vect{Y_0}\right)$.}
\textbf{Pour cela : 
\begin{itemize}
\item montrer que le gain en $\omega_a$ est de $10^{-3}$;
\item en déduire l'atténuation (en degré) d'une sinusoïde d'amplitude  $a_0=\SI{0,5}{m.s^{-2}}$.
\end{itemize}}

%Question 6d :	
\subparagraph{\label{q6d}}\textit{Dans ces conditions, le stabilisateur mécanique d’image respecte-t-il l’exigence 2.1.2 « valider pré réglage fréquence » du DOCUMENT D5-b ?}

%Question 7 :	 
\subparagraph{\label{q7}}\textit{En utilisant les différentes réponses apportées aux questions précédentes, remplir (par oui ou par non ou par indifférent) le tableau du document-réponse.}

\paragraph*{Conclusion}
Le réglage délicat ainsi que les limitations dynamiques d'un stabilisateur de type passif incitent les concepteurs à proposer une version active, objet principal de cette étude. Equipé d'actionneurs, le stabilisateur actif reprend les principes du stabilisateur passif en corrigeant/améliorant ses performances.

\subsection{Stabilisateur de type « actif »}

Afin de traiter les questions qui suivent, on fait référence principalement aux figures 1 et 2 du DOCUMENT D1.
\paragraph*{Définitions}
Dans l'ensemble du sujet, on désigne par :
\begin{itemize}
\item nacelle : ensemble mécanique constitué de l'association des 3 solides indéformables \{solide 2, solide 2, support 4\}en liaison les uns avec les autres ;
\item caméra stabilisée : ensemble constitué de l'association  \{nacelle, caméra complète (boitier, objectif), AHRS\};
\item porteur : tout système mécanique \{bras, câbles avec enrouleurs, apparail volant de tout type, ...\} qui constitue une structure assurant le positionnement de la caméra stabilisée par rapport au sol supposé galiléen. Le solide (1) (nommé « base ») peut être considéré comme le dernier élément du porteur et supportant la nacelle.
\end{itemize}

Les mouvements autorisés entre les solides composant la nacelle sont associés aux axes référencés (voir DOCUMENT D3) et sont définis par l’exigence 1.2 « Liaison avec le porteur » du DOCUMENT D5-a.

%Question 8 :	 
\subparagraph{\label{q8}}\textit{En vous appuyant sur les figures du DOCUMENT D1, proposer une modélisation des liaisons entre les différents solides, en indiquant précisément leurs caractéristiques (par exemple : axe ou direction ou normale ou centre, etc.). Compléter le tableau du document-réponse.}

%Question 9 :	 
\subparagraph{\label{q9}}\textit{Tracer alors un schéma cinématique obligatoirement tridimensionnel de la nacelle, en respectant scrupuleusement la disposition des axes donnée sur le document-réponse. Nommer les axes en accord avec le DOCUMENT D1.}

%D'un point de vue géométrique, la fonction de l'association \{nacelle, porteur\}  est de pouvoir placer la caméra dans une position quelconque par rapport à un repère lié au sol afin de créer une image satisfaisante.
%On cherche à mettre en évidence des similarités et des différences de conception mécanique entre les versions active et passive du stabilisateur. La figure 2 du DOCUMENT D1 montre que, par construction, les trois axes de la nacelle seule sont concourants en O.
%
%%Question 10a :	
%\subparagraph{}\textit{La structure en chaine ouverte de la nacelle permet d’affirmer que la mobilité de la caméra par rapport au porteur est égale à trois. Décrire la configuration géométrique particulière dans laquelle on peut affirmer que cette mobilité se réduit à deux (on parle alors de « blocage de Cardan »). }
%
%%Question 10b :	
%\subparagraph{}\textit{Cette configuration pénalisante peut-elle se produire pour le stabilisateur passif ? }

%Afin de garantir des performances satisfaisantes, le lien mécanique placé entre les constituants de la nacelle repérés (3) et (4) (axe tangage) doit être très rigide et sans jeu. Etant donné la constitution particulière des moteurs "plats" utilisés, le guidage en rotation de cet axe est réalisé à l'aide de plusieurs paliers à éléments roulants dont on donne un modèle cinématique possible :
% 
%Figure 9 : architecture du guidage. 
%
%%Question 11 :
%\subparagraph{}\textit{	
%a)	déterminer le degré d'hyperstaticité noté « h » du modèle de guidage en rotation de l'axe tangage décrit sur la figure 9.
%L’observation de l'architecture mécanique de la nacelle (figure 2 du DOCUMENT D1) montre une autre conception de guidage dit en « porte à faux » pour les axes de lacet et de roulis.
%b)	déterminer le degré d'hyperstaticité noté « h’» du modèle de guidage en rotation des axes de lacet et roulis (encadré en traits mixtes dans la figure 9) ;
%D’après la figure 8, on suppose que la nature géométrique de surfaces en contact en O entre (1) et (2) est du type sphère-sphère.
%c)	Dans ces conditions, les contraintes engendrées par le guidage hyperstatique des axes de la nacelle existent-elles pour le stabilisateur passif (figure 8) ? 

\paragraph*{Conclusion}
Par rapport à sa version passive, la version active du stabilisateur reprend et étend le principe général du maintien d'attitude grâce à :
\begin{itemize}
\item la similarité de la liaison mécanique entre le porteur et la caméra ; 
\item et la maitrise du positionnement du centre de gravité. 
\end{itemize}
Les performances attendues sont cependant très différentes. Le stabilisateur est « bi axial » en  version  passive  et  « tri axial » dans sa version active. L’attitude générale de la caméra dans l’espace tridimensionnel est contrôlée grâce aux trois axes motorisés.

\section{Analyse de la chaîne d’information de la caméra stabilisée}

\begin{obj}
Valider l’exigence 1.4 : « Connaître l’orientation » DOCUMENT D5.a. Décrire la structure interne du composant correspondant : AHRS. Etudier les traitements internes du module AHRS.
\end{obj}

Le bloc fonctionnel AHRS (Attitude and Heading Reference System c’est-à-dire Contrôle de Cap et d’Attitude) décrit sur le DOCUMENT D2 permet de déterminer l’orientation (la position angulaire) de la caméra dans l’espace au moyen des angles de CARDAN (voir DOCUMENT D3). Le bloc AHRS fournit également les trois valeurs des vitesses angulaires de rotation selon les directions de CARDAN. 
Pour construire ces informations, le bloc fonctionnel (DOCUMENT D2) utilise les neuf informations fournies par deux composants de la carte NAVEOL :
 \begin{itemize}
 \item un composant \{accéléromètre, gyromètre\} qui mesure pour l’accéléromètre : les trois composantes $[a_x, a_y, a_z]$ de l’accélération subie par le capteur suivant les trois directions repérés sur la carte et pour le gyromètre : les trois vitesses angulaires de rotation $[\omega_x,\omega_y,\omega_z]$ autour des trois directions précédemment citées ;
 \item un composant  « magnétomètre » qui mesure les trois composantes du champ magnétique terrestre $[m_x, m_y, m_z]$ suivant les trois directions repérés sur la carte.
 \end{itemize}
Ces mesures sont effectuées dans la base $[X, Y, Z]$ associée à la carte Voir DOCUMENT D2.

Le but de cette première partie est d’analyser le fonctionnement de ce module. 

\subsection{Orientation de la caméra par rapport à la base}
Nous nous plaçons en début de fonctionnement (après une phase d’initialisation), le solide (1) voir DOCUMENT D1 est considéré confondu avec le repère terrestre (galiléen). $Z_{Rg}$ ($Z_{Rg}=Z_1$) est la verticale ascendante du lieu (DOCUMENT D3). L’orientation du solide (4) support de la caméra et du module AHRS par rapport à la base (B1) peut être définie par trois rotations en utilisant les angles de CARDAN  (DOCUMENT D3).

%Question 12 -  
\subparagraph{\label{q12}}\textit{Compléter le document réponse en vous inspirant de la première rotation (figure et matrice) proposée.}

%Question 13 - 
\subparagraph{\label{q13}}\textit{En déduire la matrice exprimant la base associée au solide (4) : ($\mathcal{B}_4$) par rapport à la base associée au solide (1) : ($\mathcal{B}_1$).}
 
Appelons $(0, 0, G_Z = -g)$ les composantes de l’accélération de la pesanteur dans la base ($\mathcal{B}_1$) et appelons $(a_X, a_Y, a_Z)$ les composantes de l’accélération de la pesanteur mesurées dans la base de la carte par AHRS. Les mouvements sont suffisamment lents pour que la seule accélération non négligeable soit celle de la pesanteur.


\textbf{On montre que : } $R_{41}=\begin{pmatrix}
\cos\psi \cos\theta & \sin\psi \cos\theta & - \sin \theta \\
-\sin\psi \cos\theta+\cos\psi\sin\theta\sin\varphi & \cos\psi \cos\theta+\sin\psi\sin\theta\sin\varphi &  \cos\theta\sin\varphi \\
\sin\psi \sin\varphi+\cos\psi\sin\theta\cos\varphi & -\cos\psi \sin\varphi+\sin\psi\sin\theta\cos\varphi &  \cos\theta\cos\varphi 
\end{pmatrix}$.
%Question 14 – 
\subparagraph{\label{q14}}\textit{En utilisant la matrice obtenue à la question \ref{q13} écrire les trois relations liant $G_Z$, $a_X$, $a_Y$ et $a_Z$ et les angles de définition de l’attitude. En déduire que la seule connaissance des composantes du vecteur accélération dans la base liée au solide (4) ne suffit pas à connaître entièrement l’attitude de la caméra par rapport au repère galiléen.}
\textbf{Pour cela, on commencera par exprimer le veceur $-g\vect{z}$ dans la base 4 à l'aide de la matrice de passage.}

Il faut donc ajouter la mesure d’une autre grandeur physique pour déterminer l’attitude. C’est le rôle des magnétomètres présents dans la centrale de contrôle de l’attitude qui mesurent le champ magnétique terrestre (DOCUMENT D2). 

Ce champ, dirigé vers le nord magnétique, est incliné de $\gamma=64\degres$ par rapport à l’horizontale à Paris.
On peut noter ce vecteur dans le repère terrestre sous la forme $\vect{M_{Rg}}=M\cos\gamma \vect{X_{Rg}}-M\sin\gamma \vect{Z_{Rg}}$ avec $M$ amplitude du champ magnétique dans la zone de travail. 

On note aussi $(m_X, m_Y, m_Z)$ les valeurs mesurées par le magnétomètre trois directions de l’AHRS dans le repère lié au solide (4).

%Question 15 -  
\subparagraph{\label{q15}}\textit{Sans effectuer le calcul complet, montrer alors que l’on peut déterminer l’attitude $(\psi,\theta,\varphi)$ à partir des mesures de ces deux vecteurs (une seule équation suffit).}


\subsection{Mesure des vitesses angulaires de rotation}

Le module AHRS possède également un gyromètre « trois axes » qui assure les mesures des vitesses angulaires de rotations suivant trois directions orthogonales. 
Les trois angles qui définissent l’attitude $(\psi,\theta,\varphi)$ ne sont pas déterminés de manière assez précise à partir des deux capteurs précédents (accéléromètres et magnétomètres) pour permettre d’obtenir les vitesses angulaires de rotation et donc détecter les petits mouvements de la caméra. 
Le but de cette partie est de mettre en place le traitement permettant de passer de $[\omega_x,\omega_y,\omega_z]$  mesurés par la carte dans la base $[X, Y, Z]$ associée à la carte à $\left[ \dfrac{\dd \psi}{\dd t},\dfrac{\dd \theta}{\dd t},\dfrac{\dd \varphi}{\dd t} \right]$ vitesses angulaire de rotation des axes de Lacet , Roulis et Tangage utiles pour les asservissements des axes Lacet , Roulis et Tangage (voir DOCUMENT D4).


%Question 16 - 
\subparagraph{\label{q16}}\textit{Dans la position du DOCUMENT D2 c’est-à-dire avec $\psi=0$, $\theta=0$, $\varphi=0$ compléter le tableau du document réponse afin d’associer les directions de mesure $(X, Y, Z)$ avec les directions de Lacet, Roulis et Tangage.}

%Question 17 -  
\subparagraph{\label{q17}}\textit{Une des directions du gyromètre « trois axes » lié à la carte [DOCUMENT D2] reste toujours colinéaire avec la direction de l’un des axes de rotation. Préciser laquelle reste colinéaire et avec quel axe (utiliser les notations de la question précédente).}

En considérant uniquement la rotation autour de cet axe, on cherche à déterminer les valeurs de rotation angulaire autour des autres axes en fonction des mesures par l’AHRS. 

%Question 18 -  
\subparagraph{\label{q18}}\textit{En utilisant la vue plane de rotation du document réponse, placer les autres axes de rotation (parmi Lacet, Roulis ou Tangage) en position relative par rapport aux autres directions (parmi $X$, $Y$ ou $Z$) du capteur. En déduire les relations liant $[\omega_x,\omega_y,\omega_z]$ à $\left[ \dfrac{\dd \psi}{\dd t},\dfrac{\dd \theta}{\dd t},\dfrac{\dd \varphi}{\dd t} \right]$. \textbf{On supposera $\theta = 0$.}}




\section{Analyse des caractéristiques mécaniques de la nacelle de caméra}

\begin{obj}
Etablir le protocole d’équilibrage statique de la nacelle munie de la caméra.
\end{obj}

Lors du montage de la caméra sur le support, la première opération à réaliser est son équilibrage statique. Outre la réduction de la consommation d'énergie (qui a pour effet d'accroitre sensiblement l'autonomie de la nacelle), un bon équilibrage est un des facteurs influençant majoritairement la qualité de l'image produite.
Le document d'accompagnement fourni avec la nacelle précise lapidairement les points suivants :
\begin{itemize}
\item brider efficacement la caméra sur la nacelle ;
\item équilibrer statiquement l'ensemble (nacelle hors tension) selon les trois axes.
\end{itemize}


%Question 19 :	
\subparagraph{\label{q19}}\textit{En vous appuyant sur la figure suivante :}
\textit{
\begin{enumerate}
\item rappeler la condition à satisfaire pour affirmer que le solide quelconque ($S$) de centre de gravité $G_S$ est équilibré statiquement par rapport à l'axe  $\left(M,\vect{u}\right)$;
\item indiquer deux solutions pratiques couramment utilisées afin de procéder à l'équilibrage statique du solide ($S$).
\end{enumerate}}

\begin{center}
\includegraphics[width=.25\linewidth]{fig_a}
\end{center}
 
Notation adoptée : on appelle $G_{4c}$ : le centre de gravité de l’ensemble \{4,caméra\}, $G_{34c}$ : le centre de gravité de l'ensemble \{3, 4, caméra\}, et $G_{234c}$ : le centre de gravité de l'ensemble \{2, 3, 4, caméra\}. On fait référence aux notations définies sur le DOCUMENT D6.

%Question 20a :
\subparagraph{\label{q20a}}\textit{En utilisant la définition du barycentre d’un ensemble à préciser, établir les expressions des deux valeurs réglables de position de la caméra sur le support (4) notées $\left(y_c,z_c\right)$ en fonction des données massiques utiles (voir DOCUMENT 6) assurant ainsi l'équilibrage de la nacelle selon l'axe de tangage. Donner une estimation numérique de $y_c$ et de $z_c$ (en millimètres).}
\textbf{On exprimera le barycentre de l'ensemble \{4+caméra\}. On déterminrea alors $\left(y_c,z_c\right)$ de telles sortes que mes projections du vecteur $\vect{O' G_{4c}}$ sur  $\vect{y_c}$ et $\vect{z_c}$ seront nulles.}

%Question 20b :
\subparagraph{\label{q20b}}\textit{À la fin de la procédure d’équilibrage de l’axe de tangage, exprimer $\vect{O'G_{4c}}$.}

%Question 20c :
\subparagraph{\label{q20c}}\textit{Compléter alors la 1ère ligne du tableau du document-réponse en indiquant les solides concernés par la procédure d’équilibrage ainsi que le décalage à effectuer.}% (utiliser le symbole ).}

%Question 20d :
\subparagraph{\label{q20d}}\textit{Sans faire de calculs, compléter les lignes 2 et 3 du tableau du document réponse en indiquant le nom de l’axe, les solides concernés par la procédure d’équilibrage ainsi que la direction du décalage à effectuer.}% (utiliser le symbole ) .

\section{Déterminer les performances globales de la caméra stabilisée}
\begin{obj}
Justifier la forme particulière de la commande asservie (ou régulée) de la caméra stabilisée : exigence 1.1 « déplacer la caméra » du DOCUMENT D5.a. Proposer un réglage d’un axe suivant plusieurs modes de fonctionnement.
\end{obj}

La caméra stabilisée possède plusieurs modes de fonctionnement selon les applications. On ne retiendra ici que quatre modes :
\begin{itemize}
\item \textbf{Mode initialisation} : la caméra hors tension est placée dans une position quelconque (manuellement) par l’opérateur. A la mise sous tension, la commande de la caméra ramène $\theta$ à zéro puis enregistre les valeurs de $\psi$ et de $\theta$. Elle affecte les valeurs de $\psi$ , $\theta=0$ et $\varphi$ aux consignes $\alpha_L^{\star}$, $\alpha_R^{\star}$ et $\alpha_T^{\star}$. (voir DOCUMENT D4);
\item \textbf{Mode pilotage} : une fois l’initialisation effectuée, on peut passer au mode pilotage au moyen d’un joystick 
qui permet de faire varier  $\alpha_L^{\star}$ et  $\alpha_T^{\star}$
mais pas $\alpha_R^{\star}$ en respectant 
les limites d’amplitude définie par l’exigence 1.2 du DOCUMENT D5-a ;
\item \textbf{Mode suivi de mouvement} : une fois les consignes fixées par l’initialisation ou le pilotage, si le système détecte une sollicitation « continue et régulière » sur le lacet et/ou le tangage alors le système va suivre cette sollicitation et modifier son orientation en conséquence ;
\item \textbf{Mode stabilisé} : une fois les consignes fixées par l’initialisation ou le pilotage, si le système ne détecte pas de sollicitation « continue et régulière » sur le lacet et/ou le tangage, le système décrit par le DOCUMENT D4, s’oppose à toute forme de perturbations afin de maintenir l’orientation de la caméra par rapport au repère terrestre.  
\end{itemize}

\subsection{Etude du Mode pilotage}

Le but de cette partie est de justifier la présence d’un filtre passe bas en entrée du schéma bloc de commande.
En mode pilotage et plus particulièrement à chaque changement de valeur de consigne sur le schéma du DOCUMENT D4, le concepteur a interposé un filtre passe bas avant le comparateur. Le but de ce filtre est d’améliorer le rendu des mouvements de caméra sur les films obtenus.

En effet lors d’un mouvement de caméra, on peut quitter rapidement une scène pour rejoindre une autre. Par contre il est important d’arriver progressivement sur la scène finale et de s’arrêter sans choc ni oscillations mais avec précision (exigence 1.12 « Maitriser les déplacements »).
On modélise par un échelon de déplacement la consigne du déplacement, et on étudie un traitement qui répond à l’exigence 1.12. 

Nous allons comparer trois types de traitement de la consigne repéré par i variant de 1 à 3 :
\begin{itemize}
\item $[i=1]$ : aucun traitement ;
\item $[i=2]$ : fonction rampe de pente $a = 1$ pour rejoindre la valeur finale ;
\item $[i=3]$ : fonction de transfert du premier ordre de constante de temps $\tau$ (filtre passe bas).
\end{itemize}

\begin{center}
\includegraphics[width=.25\linewidth]{fig_b}
\end{center}

%Question 21 : 
\subparagraph{\label{q21}}\textit{Sachant que  $A_1(p) = 1$, proposer les deux fonctions de transfert $A_2(p)$ et $A_3(p)$ sur les schémas blocs du document réponse (extrait du DOCUMENT D4) et tracer $a^{\star}_a(t)$ pour $[i=3]$.} 

\subsection{Etude du schéma bloc et du comportement de l’axe de tangage}

Le DOCUMENT D4 présente le schéma global de commande asservie des trois axes de la CAMGYR. Le schéma bloc ci-après Modèle 1 est une modélisation de l’axe de tangage.
On cherche à justifier la forme ainsi que les valeurs numériques du schéma de modélisation de l’axe de tangage.

\subsubsection{Etude en mode pilotage}

On considère un modèle de l’axe de tangage sans perturbation et qui reçoit des consignes assez rapides modélisées par des échelons.
L’ensemble \{moteur, charge\} ne présente pas de réducteur. Il est modélisé par un ensemble en série de deux fonctions de transfert :
\begin{itemize}
\item un gain pur de valeur $K_m$ (La valeur $K_{mT}$ du DOCUMENT D4 est notée $K_m$ dans cette partie) ;
\item une fonction de transfert du premier ordre de gain statique $A$ et de constante de temps $\tau_m$.
\end{itemize}
Cet ensemble présente comme entrée la commande du moteur $Com(t)$ et comme sortie la vitesse angulaire de rotation du moteur $\omega_m(t)$. Le réglage retenu est tel que $K_m A = 1$.
Le retour $K_D$ agit par un sommateur.

\begin{center}
\includegraphics[width=\linewidth]{fig_c}

Modèle 1 de l'axe de tangage
\end{center}


%Question 22 : 
\subparagraph{\label{q22}}\textit{En identifiant le schéma ci dessus au schéma du DOCUMENT D4, compléter le tableau donné sur le document réponse. Préciser le lien entre $g_1(t)$ présent sur le « Modèle 1 de l’axe de tangage » et $\varphi(t)$. }

%Question 23 : 
\subparagraph{\label{q23}}\textit{Avec $K_m A = 1$,  calculer la fonction de transfert en boucle ouverte (FTBO) et la fonction de transfert en boucle fermée (FTBF) du schéma (modèle 1).} \textbf{Pour cela, 
\begin{itemize}
\item utiliser la formule de Black pour déterminer la fonction de transfert de la boucle intérieure (attention deux plus sur le sommateur);
\item déterminer $FTBO(p)=\dfrac{Mes\varphi(p)}{\varepsilon(p)} = \dfrac{K_P}{p\left(1-K_D+\tau_m p\right)}$;
\item détéreminer $FTBF(p)=\dfrac{\varphi(p)}{\varphi^*(p)}=\dfrac{K_PA_i(p)}{K_P+(1-K_D)p+\tau_m p^2}$
\end{itemize}}

Dans un premier temps en mode pilotage, on s’intéresse au comportement de l’axe de tangage sans le filtre passe bas : $A_1(p)=1$. 

%Question 24 : 
\subparagraph{\label{q24}}\textit{Quelle est la valeur maximale de $K_D$ pour que la commande de l’axe de tangage soit strictement stable ? Préciser le(s) critère(s) de stabilité appliqué(s).}

En accord avec les résultats précédents, on fixe $K_D = 0,5$ et$\tau_m=\SI{0,2}{s}$.
Dans un premier temps on impose  $K_P = \SI{10}{s^{-1}}$.

%Question 25 : 
\subparagraph{\label{q25}}\textit{En cas de consigne en échelon, l’axe de tangage ainsi réglé présente-t-il des dépassements et/ou des oscillations ? Justifier votre réponse. } \textbf{On remarquera que le système est d'ordre 2 et on concluera en fonction des valeurs du coefficient d'amortissement.}


La figure temporelle ci-contre propose une réponse du système avec un filtre passe bas de constante de temps 2 secondes et de gain égal à 1 $[i=3]$.

\begin{center}
\includegraphics[width=.5\linewidth]{fig_d}

\end{center}




%Question 26 : 
\subparagraph{\label{q26}}\textit{Montrer que le comportement est alors compatible avec l’exigence 1.12 « maitriser les déplacements » du DOCUMENT D5-a.}

Dans un second temps on se place en mode stabilisation. On s’intéresse toujours au comportement de l’axe de tangage mais sans le filtre passe bas ($A_1(p)=1$).
On considère ici que la consigne est constante donc $\varphi^{\star}_a(t)=0$. Une perturbation $Pe(p)$ agit au niveau de l’ensemble (moteur, charge) modélisée sur le schéma bloc (Modèle 2). On appelle $Com(p)$ la transformée de Laplace de la commande du moteur $\text{com}(t)$.

\begin{center}
\includegraphics[width=\linewidth]{fig_e}

Modèle 2 de l'axe de tangage
\end{center}


%Question 27 : 
\subparagraph{\label{q27}}\textit{Avec le « modèle 2 » calculer la Fonction de transfert $\text{Stab}(p)=\dfrac{Com(p)}{\text{Pe}(p)}$  qui lie la commande du moteur à la perturbation.}

Conseil de résolution : calculer $\varepsilon_1(p)$ en fonction de $Pe(p)$, Com(p) et des fonctions de transfert utiles, puis
calculer $\varepsilon_2(p)$
en fonction de $\varepsilon_1(p)$
et des fonctions de transfert utiles, 
puis $\varepsilon_3(p)$
en fonction de $\varepsilon_1(p)$, $\varepsilon_2(p)$ et des fonctions de transfert utiles et enfin en déduire 
 $\text{Stab}(p)=\dfrac{\text{Com}(p)}{\text{Pe}(p)}$.
\textbf{Monter que $\text{Stab(p)}=\dfrac{(-K_P+pK_D)(1+\tau_m p)}{p(1+\tau_m p)+(K_P-pK_D)K_m A}$.}
%Question 28 : 
\subparagraph{\label{q28}}\textit{Avec le « modèle 2 » et une entrée $Pe(p)$ échelon unitaire, déterminer la limite quand $t$ tend vers l’infini de la commande : $\text{com}(t)$. Quel sens physique donner à ce résultat ?}

%Question 29 : 
\subparagraph{\label{q29}}\textit{Avec le « modèle 2 » déterminer la FTBO :  $\dfrac{\text{Mes}\varphi(p)}{\varepsilon_2(p)}$ de ce schéma puis calculer la fonction de transfert liant la perturbation et la sortie $\text{Pert}(p)=\dfrac{\varphi(p)}{\text{Pe}(p)}$ .} \textbf{Montrer que $\text{Pert}(p)=\dfrac{1+Ap}{p(B+Cp) + D}$.}

%Question 30 : 
\subparagraph{\label{q30}}\textit{Déterminer la valeur lorsque $t$ tend vers l’infini de la réponse temporelle de ce système à une perturbation de type échelon unitaire. Quel sens physique donner à ce résultat ?}


%Question 31 : 
\subparagraph{\label{q31}}\textit{On désire une marge de gain de $M_\text{G} \geq \SI{5}{dB}$ et une marge de phase $M_{\varphi}\geq 20\degres$ (exigence 1.14 « stabilité de la commande » du DOCUMENT D5-a). Déterminer la valeur maximale de $K_P$ en utilisant les données ci-dessous :}

\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
$\omega (\si{rad.s^{-1}})$ & 1 & 2 & 5 & 7 & 10 \\ \hline
$\arg\left( \dfrac{1}{j\omega} \cdot \dfrac{2}{1+0,4 j\omega}\right)$&  $-112\degres$&$-135\degres$&$-153\degres$&$-160\degres$&$-166\degres$ \\ \hline
$20\log \left| \dfrac{1}{j\omega} \cdot \dfrac{2}{1+0,4 j\omega}\right|$&
\SI{5,4}{dB} & $\SI{3}{dB}$ & $-\SI{1}{dB}$ & $-\SI{3}{dB}$ & $-\SI{6,2}{dB}$ \\ \hline
\end{tabular}
\end{center}

On rappelle que $20\log(2)=6$, $20\log(3)=9,5$, $20\log(5)=14$.

Le document réponse présente la réponse temporelle de l’axe de tangage à une perturbation sinusoïdale (due par exemple au vent qui crée un balancement de la GYRCAM).


%Question 32 : 
\subparagraph{\label{q32}}\textit{Analyser ce tracé par rapport à l’exigence 1.13 « Perturbations » du DOCUMENT D5-a et justifier le tracé de $\text{Com}(t)$ relativement à $\text{Pe}(t)$ en utilisant le résultat de la question \ref{q28}.}

Afin d’améliorer le comportement, un autre réglage a été effectué, ce qui donne sur le document réponse un nouveau tracé. 

%Question 33 : 
\subparagraph{\label{q33}}\textit{Analyser comparativement ce nouveau tracé. Quel(s) réglage(s) ont été fait(s) ? Quelle est l’amélioration principale obtenue ?}

\includepdf{DOCUMENT_D1.pdf}

\includepdf[angle=90]{DOCUMENT_D2-D3.pdf}

\includepdf[angle=90]{Document4.pdf}

\includepdf[angle=90]{Document_D5_Exigences.pdf}

\includepdf{DOCUMENT_D6.pdf}

\end{document}



